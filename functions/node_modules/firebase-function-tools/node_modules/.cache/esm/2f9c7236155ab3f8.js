let functions,admin,setClaim,removeClaim;_155‍.x([["default",()=>_155‍.o]]);_155‍.w("firebase-functions",[["*",null,function(v){functions=v}]]);_155‍.w("firebase-admin",[["default",["admin"],function(v){admin=v}]]);_155‍.w("../../utils/customClaims",[["setClaim",["setClaim"],function(v){setClaim=v}],["removeClaim",["removeClaim"],function(v){removeClaim=v}]]);



_155‍.d(functions
  .region('europe-west1')
  .database.ref('admins/{uid}/')
  .onWrite(async (snap, context) => {
    const value = snap.after.val()
    const uid = context.params.uid

    if (value) {
      await admin.firestore().doc(`/admins/${uid}/`).set({ isAdmin: value })
      await setClaim(uid, 'admin')
    } else {
      await admin.firestore().doc(`/admins/${uid}/`).delete()
      await removeClaim(uid, 'admin')
    }

    return
  }));
